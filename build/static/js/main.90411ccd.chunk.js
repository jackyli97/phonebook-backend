(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),o=t(15),a=t.n(o),u=(t(21),t(6)),i=t(3),l=t(4),s=t.n(l),d=function(e){return Object(c.jsxs)("div",{children:["filter shown with"," ",Object(c.jsx)("input",{onChange:e.handleChange("search"),value:e.newSearch})]})},b=function(e){return Object(c.jsxs)("form",{onSubmit:e.handleNewPerson,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{onChange:e.handleChange("name"),value:e.newName})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{onChange:e.handleChange("number"),value:e.newNumber})]}),Object(c.jsxs)("div",{children:["debug: ",e.newName]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){return Object(c.jsx)(c.Fragment,{children:e.numbersToShow.map((function(n){return Object(c.jsxs)("li",{children:[n.name," ",n.number," ",Object(c.jsx)("button",{onClick:function(){return e.handleDelete(n.id,n.name)},children:"delete"})]})}))})},j=function(e){var n=e.message,t=e.type;if(null===n)return null;return Object(c.jsx)("div",{className:"error",style:"success"===t?{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},f="/api/persons",m=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(""),l=Object(i.a)(a,2),m=l[0],O=l[1],g=Object(r.useState)(""),p=Object(i.a)(g,2),v=p[0],w=p[1],x=Object(r.useState)(""),S=Object(i.a)(x,2),y=S[0],C=S[1],k=Object(r.useState)(null),N=Object(i.a)(k,2),T=N[0],D=N[1],P=Object(r.useState)(null),B=Object(i.a)(P,2),I=B[0],z=B[1];Object(r.useEffect)((function(){s.a.get(f).then((function(e){o(e.data)}))}),[]);var E=function(e){return function(n){"name"===e?O(n.target.value):"number"===e?w(n.target.value):"search"===e&&C(n.target.value)}},J=0===y.length?t:t.filter((function(e){return e.name.toLowerCase().includes(y)})),R=function(){var e=t.find((function(e){return e.name===m})),n="".concat(f,"/").concat(e.id),c=Object(u.a)(Object(u.a)({},e),{},{number:v});s.a.put(n,c).then((function(e){return e.data})).then((function(n){D("Updated ".concat(m,"'s number")),z("success"),setTimeout((function(){D(null),z(null)}),5e3),o(t.concat(n)),O(""),w(""),o(t.map((function(t){return t.id!==e.id?t:n}))),O(""),w("")})).catch((function(e){D("Information of ".concat(m," has already been removed from server")),z("error"),setTimeout((function(){D(null),z(null)}),5e3)}))},A=function(e){return t.filter((function(n){return n.name===e})).length>0};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(j,{message:T,type:I}),Object(c.jsx)(d,{handleChange:E,newSearch:y}),Object(c.jsx)(b,{handleChange:E,handleNewPerson:function(e){(e.preventDefault(),A(m))?window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))&&R():s.a.post(f,{name:m,number:v,id:t.length+1}).then((function(e){return e.data})).then((function(e){D("Added ".concat(m," ")),z("success"),setTimeout((function(){D(null),z(null)}),5e3),o(t.concat(e)),O(""),w("")})).catch((function(e){D("Problem adding new person, please try again"),z("error"),setTimeout((function(){D(null),z(null)}),5e3)}))},newName:m,newNumber:v}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(h,{numbersToShow:J,handleDelete:function(e,n){window.confirm("Delete ".concat(n))&&s.a.delete("".concat(f,"/").concat(e)).then((function(){o(t.filter((function(n){return n.id!==e})))})).catch((function(e){D("Information of ".concat(n," has already been removed from server")),z("error"),setTimeout((function(){D(null),z(null)}),5e3)}))}})]})};a.a.render(Object(c.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.90411ccd.chunk.js.map